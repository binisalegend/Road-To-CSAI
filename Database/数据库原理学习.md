# 数据库系统引论
---
## 数据库系统结构
### 数据库系统的三级模式结构
1. Schema(逻辑模式)：应用DDL语言(Database Description Language)，全体数据逻辑结构和特征的描述，构成了数据库的总体框架
2. External Schema(Subschema)：外模式是用户能看见的局部数据的逻辑结构和特征，是与某一应用具体相关的数据逻辑表示；不同用户有不同的外模式，保障数据安全性；介于模式与应用之间
3. Interal Schema(内模式)：存储模式，一个数据库只能有一个，是整个数据库实际存储的表示
![](Pasted%20image%2020240228090112.png)
### 三级模式结构的二级映像
- 数据库系统的三级模式是对数据的三个抽象级别：**视图级、概念级和物理级**，它使用户能逻辑地抽象地处理数据，而不必关心数据在计算机内部的存储方式，把数据的具体组织交给DBMS管理
- 外模式与模式之间的映像定义局部数据逻辑结构与全局逻辑结构的对应关系，实现了数据的**逻辑独立性**：一个模式对应多个外模式。当模式结构改变，则只要修改外模式与模式间的对应关系，而不必修改外 模式中的局部逻辑结构，因而相应的应用程序亦可不必修改
- 模式与内模式之间的映像定义全局数据逻辑结构和物理数据存储的对应关系，提供了数据的**物理独立性**：一个模式对应一个内模式。当数据库的物理存储结构改变时，仅需要修改模式与内模式间的映像关系，而可以使模式保持不变，从而使应用程序保持不变

## 数据库管理系统

### 数据库管理系统的功能

#### 定义功能
1. 模式定义语言(DDL)：定义数据库全局逻辑结构，定义记录型和记录的数据项信息，说明数据之间的联系
2. 外模式定义语言：定义用户的局部逻辑结构，形式功能与DDL基本相同
3. 内模式定义语言：定义物理数据库的结构，包括数据的存储方式、存取方式和检索技术、以及对数据的分区分页

#### 操作功能
数据操纵语言(Data Manipulation Language, DML)实现对数据库的**插入、删除、修改、查询**操作

#### 保护功能
安全性、完整性控制、并发控制和恢复

## 数据库系统的不同视图
数据库的相关人员主要分为四类：**数据库管理员（DBA）、系统分析员、应用程序员和用户**

不同人员涉及数据的抽象级别不同，因而具有不同的数据库视图![](Pasted%20image%2020240228104620.png)
1. 数据库管理员（DBA）：决定数据库中的信息内容和结构、存储结构和存取策略、监控运行安全性以及数据库的改进重组
2. 系统分析员：负责应用系统的需求分析和规范说明，与用户和DBA协商确定硬软件配置，参与数据库的概要设计
3. 数据库设计人员：确定数据，调查用户分析，设计数据库各层模式
4. 应用程序员：设计编写应用系统模块，进行调试安装
5. 用户：偶然、简单和复杂用户

# 数据模型
---
数据模型是数据特征的抽象，用来描述数据的一组概念和定义，包含**数据结构、数据操作和数据的完整性约束**三部分

1. 数据结构：描述数据库组成对象以及对象之间的联系，通常按照数据结构的类型命名数据模型，描述系统静态特性
2. 数据操作：对数据库中各种对象实例允许执行的操作，描述系统动态特性
3. 数据的完整性约束：保证数据的正确、有效和相容

## E-R(Entity-Relationship)概念模型
### 概念定义
1. 实体(Entity)：客观存在并且相互区别的事物，可以是具体对象或抽象概念；具有同类特征的实体集合称为实体集
2. 属性(Attribute)：实体特征称为属性，实体可由若干个属性来刻画；属性分为“类型”和“值”：类型即属性名，属性值的集合构成了一个学生实体
3. 联系(Relationship)：实体之间的联系(不同实体集的联系)，事物内部的联系(实体内部属性之间的联系)；有一一(1: 1)对应、一对多(1: n)和多对多(m: n)等

### E-R图
1. 实体用矩形框表示，属性用椭圆形表示
2. 实体之间的联系用菱形框表示，连线旁标明实体间联系的类型

### 联系
1. 基数比约束：即上文提到的一一(1: 1)对应、一对多(1: n)和多对多(m: n)等
2. 参与约束：一个实体集中的所有实体都参与联系称为完全参与，否则称为部分参与
3. 实体参与度：实体参与联系的最小和最大次数，称为实体的参与度
4. 弱实体：依赖其他实体存在的实体，E-R图中用双框矩形表示，表示全部参与时与菱形用双线连接
5. 子类实体

## 层次模型


## 网状模型


## 关系模型

### 基本概念
基本数据结构被限制为二维表，一个二维表称为一个关系
1. 关系：
   1. 关系(relation)：一个关系可用来表述一个实体集，是一张由行列组成的二维表
   2. 属性(attribute)：每一列为关系的一个属性
   3. 域(domain)：一个属性对应一个值的集合，即域是属性的取值范围
   4. 元组(tuple)：关系是元组的集合，一个元组对应实体集的一个个体，可以理解为一条数据
   5. 键(key)：键是由一个或多个属性组成等，能够唯一识别一个元组

2. 关系模式(relation schema)
   1. 关系名(属性1，属性2，$\cdots$，属性n)
   2. 关系数据库模式是一组关系的集合
   3. 关系模型中基本的数据结构是单一的关系
   4. 关系必须是规范化的，最基本条件即为关系的每一个分量必须是一个不可再分的原子数据项

3. 数据完整性约束
   - 实体完整性、参照完整性、用户自定义完整性

4. 数据操纵
   1. 对数据的查询、插入、删除和修改操作；可以进行多种运算，运算结果又构成新的关系
   2. 关系运算分为关系代数和关系演算

### 关系模型的优势
1. 数据结构简单
2. 一体化数据子语言
3. 数据独立性搞
4. 面向集合的存取方式
5. 坚实的理论基础
6. 有利于开展其他应用


# 关系数据库
---
> [!NOTE] 定义
> 支持关系模型的数据库系统
> 
> 由数据结构、数据操作和完整性约束构成

1. 域(domain)：一组具有相同数据类型值的集合，表示属性的取值范围，如$D_{2}=\{male, female\}$，$D_{2}$为域名
2. 笛卡尔积(Cartesian Product)：给定一组集合，表示的是域中所有取值的组合
3. 元组(tuple)：笛卡尔积中每一个元素叫做一个$n$元组
4. 分量(Component)：笛卡尔积元素中每一个$d_{i}$叫做一个分量

## 关系