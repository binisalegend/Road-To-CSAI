/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => DynamicBackgroundPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// effects/dark-dynamic-star-sky.ts
function Add_StarSky(dynamicBackgroundContainer) {
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-star-sky-dynamic-effect" });
    effect.createEl("div", { cls: "star-sky" });
  }
}
function Remove_StarSky(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-star-sky-dynamic-effect");
  if (effect) {
    effect.remove();
  }
}

// effects/dark-dynamic-snow.ts
var DarkTheme_Snow_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_Snow(dynamicBackgroundContainer) {
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-snow-dynamic-effect" });
    effect.createEl("div", { cls: "snow" });
  }
}
function Remove_Snow(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-snow-dynamic-effect");
  if (effect) {
    effect.remove();
  }
}

// effects/dark-dynamic-rain.ts
var DarkTheme_Rain_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_Rain(dynamicBackgroundContainer) {
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-rain-dynamic-effect" });
    let drop1 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 34; --y: 90; --o: 0.6654153804683264; --a: 0.9917710156945896; --d: -0.8043425740744814; --s: 0.6951142349804096"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop2 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 49; --y: 81; --o: 0.0317509941505465; --a: 1.4150340796041947; --d: -0.8977060475990615; --s: 0.3560926038758976"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop3 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 93; --y: 6; --o: 0.6536147164205229; --a: 1.3150980722082548; --d: -0.5493637177821533; --s: 0.5552132370247103"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop4 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 22; --y: 13; --o: 0.4259600004078947; --a: 0.5854285185377734; --d: -0.5293135001180258; --s: 0.3526760878325925"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop5 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 36; --y: 20; --o: 0.5609448459063665; --a: 1.4252956133711117; --d: -0.7690131594986251; --s: 0.6689223471599941"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop6 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 48; --y: 54; --o: 0.2850601343180057; --a: 1.4235635026018683; --d: -0.4523568427598179; --s: 0.19763333766570312"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop7 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 16; --y: 4; --o: 0.4224367492164993; --a: 0.9291570251573422; --d: -0.7072288650072931; --s: 0.3225005986968783"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop8 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 50; --y: 52; --o: 0.5163724944648716; --a: 0.5163417250721392; --d: -0.24562675844904858; --s: 0.7462277243198527"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop9 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 35; --y: 66; --o: 0.31206402174244974; --a: 0.6059744356541634; --d: 0.37906548779328597; --s: 0.7307418662633716"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop10 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 64; --y: 81; --o: 0.8158102807508611; --a: 0.6722718682672502; --d: 0.2444215747954348; --s: 0.8667250195046547"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop11 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 88; --y: 35; --o: 0.02762815253441553; --a: 0.9555468749843488; --d: 0.08996319031500377; --s: 0.7428281610861129"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop12 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 88; --y: 91; --o: 0.6103134847919844; --a: 0.9001734345539698; --d: -0.917351021576823; --s: 0.0040542399155854"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop13 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 62; --y: 54; --o: 0.2856796208317729; --a: 0.9046554131241138; --d: -0.13645809866400516; --s: 0.5739079247947556"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop14 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 26; --y: 67; --o: 0.3249777593937293; --a: 1.0274350664090073; --d: -0.8605688159121647; --s: 0.7199893214500341"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop15 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 74; --y: 39; --o: 0.6085176773865959; --a: 1.1647324962389058; --d: -0.08643048534587949; --s: 0.5449421802860281"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drop16 = '<svg class="rain__drop" preserveAspectRatio="xMinYMin" viewBox="0 0 5 50" style="--x: 3; --y: 78; --o: 0.7413154227917105; --a: 0.7082137175865917; --d: 0.931629538260506; --s: 0.48335465500642294"><path stroke="none" d="M 2.5,0 C 2.6949458,3.5392017 3.344765,20.524571 4.4494577,30.9559 5.7551357,42.666753 4.5915685,50 2.5,50 0.40843152,50 -0.75513565,42.666753 0.55054234,30.9559 1.655235,20.524571 2.3050542,3.5392017 2.5,0 Z"></path></svg>';
    let drops = drop1 + drop2 + drop3 + drop4 + drop5 + drop6 + drop7 + drop8 + drop9 + drop10;
    drops += drop11 + drop12 + drop13 + drop14 + drop15 + drop16;
    effect.innerHTML += drops;
  }
}
function Remove_Rain(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-rain-dynamic-effect");
  if (effect) {
    effect.remove();
  }
}

// effects/dark-dynamic-random-circle.ts
var DarkTheme_Random_Circle_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_RandomCircle(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-random-circle-dynamic-effect" });
    effect.createEl("canvas");
    let code = `
      var odb_random_circle_ctx;
      var odb_random_circle_grd;

      function Obsidian_Dynamic_Background_Start() {
        var canvas = document.querySelector("div.odb-dt-random-circle-dynamic-effect canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        odb_random_circle_ctx = canvas.getContext("2d");

        odb_random_circle_grd = odb_random_circle_ctx.createLinearGradient(0, window.innerHeight, 0, 0);

        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        Obsidian_Dynamic_Background_Animate();
      }

      function Obsidian_Dynamic_Background_Firework(x, y) {
        this.x = x;
        this.y = y;
        this.radius = 5;
        this.time = 0;
        this.lifespan = Math.random()*180 + 150;

        this.draw = function() {
          odb_random_circle_ctx.beginPath();
          odb_random_circle_ctx.arc(this.x, window.innerHeight - this.y, this.radius, 0, 2*Math.PI, false);
          var alpha = (this.lifespan - this.time)/this.lifespan;
          odb_random_circle_ctx.strokeStyle = "rgba(255, 255, 255, " + alpha + ")";
          odb_random_circle_ctx.stroke();
        }

        this.update = function() {
          if (this.time < this.lifespan) {
            this.radius += .25;
            this.time += 1;
            this.draw();
          }
        }
      }

      var fireworks = [];
      var time = 0;

      function Obsidian_Dynamic_Background_Animate() {
        odb_random_circle_ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        if (time % Math.floor(Math.random()*100 + 40) == 0) {
          var x = Math.floor(Math.random()*window.innerWidth);
          var y = Math.floor(Math.random()*window.innerHeight);
          fireworks.push(new Obsidian_Dynamic_Background_Firework(x, y));
        }

        fireworks.forEach(firework => {
          firework.update();
          if ((firework.time - firework.explosionTime) > 20) {
            for (var i = 0; i < fireworks.length; i++) {
              if (firework === fireworks[i]) {
                delete fireworks[i];
              }
            }
          }
        })
        
        time += 1;

        if (Obsidian_Dynamic_Background_Animate)
          requestAnimationFrame(Obsidian_Dynamic_Background_Animate);
      }

      Obsidian_Dynamic_Background_Start();
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_RandomCircle(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-random-circle-dynamic-effect");
  if (effect) {
    effect.remove();
  }
  Unload_Effect_Script();
}
function Unload_Effect_Script() {
  window["Obsidian_Dynamic_Background_Start"] = null;
  window["Obsidian_Dynamic_Background_Firework"] = null;
  window["Obsidian_Dynamic_Background_Animate"] = null;
}

// effects/light-dynamic-random-circle.ts
var LightTheme_Random_Circle_Background_Property = "linear-gradient(0deg, rgba(255,255,255,1) 62%, rgba(230,244,255,1) 100%)";
function Add_RandomCircle_Light(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-lt-random-circle-dynamic-effect" });
    effect.createEl("canvas");
    let code = `
      var odb_random_circle_ctx;
      var odb_random_circle_grd;

      function Obsidian_Dynamic_Background_Start() {
        var canvas = document.querySelector("div.odb-lt-random-circle-dynamic-effect canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        odb_random_circle_ctx = canvas.getContext("2d");

        odb_random_circle_grd = odb_random_circle_ctx.createLinearGradient(0, window.innerHeight, 0, 0);

        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        Obsidian_Dynamic_Background_Animate();
      }

      function Obsidian_Dynamic_Background_Firework(x, y) {
        this.x = x;
        this.y = y;
        this.radius = 5;
        this.time = 0;
        this.lifespan = Math.random()*180 + 150;

        this.draw = function() {
          odb_random_circle_ctx.beginPath();
          odb_random_circle_ctx.arc(this.x, window.innerHeight - this.y, this.radius, 0, 2*Math.PI, false);
          var alpha = (this.lifespan - this.time)/this.lifespan;
          odb_random_circle_ctx.strokeStyle = "rgba(0, 128, 255, " + alpha + ")";
          odb_random_circle_ctx.stroke();
        }

        this.update = function() {
          if (this.time < this.lifespan) {
            this.radius += .25;
            this.time += 1;
            this.draw();
          }
        }
      }

      var fireworks = [];
      var time = 0;

      function Obsidian_Dynamic_Background_Animate() {
        odb_random_circle_ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        odb_random_circle_ctx.fillStyle = odb_random_circle_grd;
        odb_random_circle_ctx.fillRect(0, 0, window.innerWidth, window.innerHeight);
        
        if (time % Math.floor(Math.random()*100 + 40) == 0) {
          var x = Math.floor(Math.random()*window.innerWidth);
          var y = Math.floor(Math.random()*window.innerHeight);
          fireworks.push(new Obsidian_Dynamic_Background_Firework(x, y));
        }

        fireworks.forEach(firework => {
          firework.update();
          if ((firework.time - firework.explosionTime) > 20) {
            for (var i = 0; i < fireworks.length; i++) {
              if (firework === fireworks[i]) {
                delete fireworks[i];
              }
            }
          }
        })
        
        time += 1;

        if (Obsidian_Dynamic_Background_Animate)
          requestAnimationFrame(Obsidian_Dynamic_Background_Animate);
      }

      Obsidian_Dynamic_Background_Start();
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_RandomCircle_Light(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-lt-random-circle-dynamic-effect");
  if (effect) {
    effect.remove();
  }
  Unload_Effect_Script2();
}
function Unload_Effect_Script2() {
  window["Obsidian_Dynamic_Background_Start"] = null;
  window["Obsidian_Dynamic_Background_Firework"] = null;
  window["Obsidian_Dynamic_Background_Animate"] = null;
}

// effects/light-dynamic-wave.ts
var LightTheme_Wave_Background_Property = "linear-gradient(0deg, rgba(255,255,255,1) 60%, rgba(201,233,255,1) 100%)";
function Add_Wave_Light(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-lt-wave-effect" });
    effect.createEl("div", { cls: "ocean" });
    let code = `
      function Obsidian_Dynamic_Background_ShowWave() {
        var ocean = document.querySelector("div.odb-lt-wave-effect div.ocean"),
        waveWidth = 10,
        waveCount = Math.floor(window.innerWidth/waveWidth),
        docFrag = document.createDocumentFragment();

        for(var i = 0; i < waveCount; i++){
          var wave = document.createElement("div");
          wave.className += " wave-0723";
          docFrag.appendChild(wave);
          wave.style.left = i * waveWidth + "px";
          wave.style.webkitAnimationDelay = (i/100) + "s";
        }

        ocean.appendChild(docFrag);
      }

      Obsidian_Dynamic_Background_ShowWave();
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_Wave_Light(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-lt-wave-effect");
  if (effect) {
    effect.remove();
  }
  Unload_Effect_Script3();
}
function Unload_Effect_Script3() {
  window["Obsidian_Dynamic_Background_ShowWave"] = null;
}

// effects/dark-dynamic-digital-rain.ts
var DarkTheme_Digital_Rain_Background_Property = "radial-gradient(ellipse at bottom, #1b2735 20%, #090a0f 100%)";
function Add_DigitalRain(dynamicBackgroundContainer) {
  let effectScript;
  if (dynamicBackgroundContainer) {
    let effect = dynamicBackgroundContainer.createEl("div", { cls: "odb-dt-digital-rain-dynamic-effect" });
    effect.createEl("canvas");
    let code = `
      var odb_digital_rain_canvas
      var odb_digital_rain_ctx;
      var odb_digital_rain_grd;
      var odb_digital_rain_digitals = "1001101010110101010101010010101010101011101111010101010110101010101010101110010101";
      var odb_digital_rain_font_size = 15;
      var odb_digital_rain_columns;    //number of columns for the rain
      var odb_digital_rain_drops = []; //an array of drops - one per column
      var odb_digital_rain_interval;

      function Obsidian_Dynamic_Background_Draw(){
        odb_digital_rain_ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        odb_digital_rain_ctx.fillRect(0, 0, odb_digital_rain_canvas.width, odb_digital_rain_canvas.height);

        odb_digital_rain_ctx.fillStyle = "#0F0";
        odb_digital_rain_ctx.font = odb_digital_rain_font_size + "px arial";

        for(var i = 0; i < odb_digital_rain_drops.length; i++)
        {
            var digital = odb_digital_rain_digitals[Math.floor(Math.random()*odb_digital_rain_digitals.length)];

            odb_digital_rain_ctx.fillText(digital, i*odb_digital_rain_font_size, odb_digital_rain_drops[i]*odb_digital_rain_font_size);
            
            if(odb_digital_rain_drops[i]*odb_digital_rain_font_size > odb_digital_rain_canvas.height && Math.random() > 0.975)
              odb_digital_rain_drops[i] = 0;
            
              odb_digital_rain_drops[i]++;
        }
      }

      function Obsidian_Dynamic_Background_Start() {
        odb_digital_rain_canvas = document.querySelector("div.odb-dt-digital-rain-dynamic-effect canvas");
        odb_digital_rain_canvas.width = window.innerWidth;
        odb_digital_rain_canvas.height = window.innerHeight;

        odb_digital_rain_ctx = odb_digital_rain_canvas.getContext("2d");
        odb_digital_rain_ctx.globalAlpha = 1;
        odb_digital_rain_ctx.globalCompositeOperation = "xor";

        odb_digital_rain_columns = odb_digital_rain_canvas.width/odb_digital_rain_font_size;

        for(var x = 0; x < odb_digital_rain_columns; x++)
          odb_digital_rain_drops[x] = 1; 
      }

      function Obsidian_Dynamic_Background_SetBrightness(brightness) {
        odb_digital_rain_canvas.width = window.innerWidth;  // clear canvas
        odb_digital_rain_ctx.globalCompositeOperation = "xor";
        odb_digital_rain_ctx.globalAlpha = brightness;
      }

      function Obsidian_Dynamic_Background_Clear() {
        clearInterval(odb_digital_rain_interval);
      }

      Obsidian_Dynamic_Background_Start();
      odb_digital_rain_interval = setInterval(Obsidian_Dynamic_Background_Draw, 80);
    `;
    effectScript = effect.createEl("script");
    effectScript.textContent = code;
  }
}
function Remove_DigitalRain(dynamicBackgroundContainer) {
  let effect = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect");
  if (effect) {
    CallClear(dynamicBackgroundContainer);
    effect.remove();
  }
  Unload_Effect_Script4();
}
function Unload_Effect_Script4() {
  window["Obsidian_Dynamic_Background_Start"] = null;
  window["Obsidian_Dynamic_Background_Draw"] = null;
  window["Obsidian_Dynamic_Background_Clear"] = null;
  window["Obsidian_Dynamic_Background_SetBrightness"] = null;
}
function CallClear(dynamicBackgroundContainer) {
  let effectScript;
  let effect = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect");
  let code = `
    Obsidian_Dynamic_Background_Clear();
    `;
  effectScript = effect.createEl("script");
  effectScript.textContent = code;
}
function SetBrightness(dynamicBackgroundContainer, brightness) {
  let setBrightnessScript;
  let setBrightnessScriptContainer;
  let effect = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect");
  if (effect) {
    let setBrightnessScriptContainer2 = dynamicBackgroundContainer.find("div.odb-dt-digital-rain-dynamic-effect div.set-brightness-script-container");
    if (setBrightnessScriptContainer2) {
      setBrightnessScriptContainer2.remove();
    }
    setBrightnessScriptContainer2 = effect.createEl("div", { cls: "div.set-brightness-script-container" });
    let code = "Obsidian_Dynamic_Background_SetBrightness(" + brightness + ")";
    setBrightnessScript = setBrightnessScriptContainer2.createEl("script");
    setBrightnessScript.textContent = code;
  }
}

// main.ts
var DEFAULT_SETTINGS = {
  dynamicEffect: 1 /* Dark_StarSky */,
  digitalRainBrightness: 0.7,
  enableDynamicEffect: true,
  backgroundImageFile: "",
  blur: 0
};
var DynamicBackgroundPlugin = class extends import_obsidian.Plugin {
  onload() {
    return __async(this, null, function* () {
      console.log("loading dynamic background plugin...");
      this.preDynamicEffect = -1 /* Unknown */;
      yield this.loadSettings();
      this.addSettingTab(new DynamicBackgroundSettingTab(this.app, this));
      this.app.workspace.onLayoutReady(() => {
        this.AddDynamicBackgroundContainer();
        this.SetDynamicBackgroundContainerBgProperty();
        if (this.settings.enableDynamicEffect == true) {
          this.AddDynamicBackgroundEffect(this.settings.dynamicEffect);
        }
      });
    });
  }
  onunload() {
    console.log("unloading dynamic background plugin...");
    this.RemoveDynamicBackgroundContainer();
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
  AddDynamicBackgroundContainer() {
    let div_root = app.workspace.containerEl.find("div.workspace > div.mod-root");
    this.dynamicBackgroundContainer = null;
    if (div_root) {
      this.dynamicBackgroundContainer = div_root.createEl("div", { cls: "rh-obsidian-dynamic-background-container" });
      this.wallpaperCover = this.dynamicBackgroundContainer.createEl("div", { cls: "rh-wallpaper-cover" });
      this.SetWallpaperBlur();
    }
  }
  SetWallpaperBlur() {
    let value = "blur(" + this.settings.blur.toString() + "px)";
    this.wallpaperCover.style.setProperty("filter", value);
  }
  RemoveDynamicBackgroundContainer() {
    if (this.dynamicBackgroundContainer) {
      this.dynamicBackgroundContainer.remove();
      this.dynamicBackgroundContainer = null;
    }
  }
  SetDynamicBackgroundContainerBgProperty() {
    return __async(this, null, function* () {
      if (this.dynamicBackgroundContainer == null)
        return;
      let backgroundImageAlreadySet = false;
      let imageFullFilename = "";
      try {
        imageFullFilename = this.app.vault.adapter.getResourcePath(this.settings.backgroundImageFile);
      } catch (e) {
      }
      if (imageFullFilename != "") {
        this.dynamicBackgroundContainer.style.setProperty("background", 'url("' + imageFullFilename + '"');
        this.dynamicBackgroundContainer.style.setProperty("background-size", "cover");
        this.dynamicBackgroundContainer.style.setProperty("background-position", "center");
        backgroundImageAlreadySet = true;
      } else {
        this.dynamicBackgroundContainer.style.removeProperty("background");
        this.dynamicBackgroundContainer.style.removeProperty("background-size");
        this.dynamicBackgroundContainer.style.removeProperty("background-position");
      }
      if (backgroundImageAlreadySet == false) {
        this.dynamicBackgroundContainer.style.removeProperty("background");
        this.dynamicBackgroundContainer.style.removeProperty("background-size");
        this.dynamicBackgroundContainer.style.removeProperty("background-position");
        if (this.settings.enableDynamicEffect == false)
          return;
        switch (this.settings.dynamicEffect) {
          case 1 /* Dark_StarSky */:
            break;
          case 2 /* Dark_Snow */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Snow_Background_Property);
            break;
          case 3 /* Dark_Rain */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Rain_Background_Property);
            break;
          case 4 /* Dark_RandomCircle */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Random_Circle_Background_Property);
            break;
          case 40 /* Light_RandomCircle */:
            this.dynamicBackgroundContainer.style.setProperty("background", LightTheme_Random_Circle_Background_Property);
            break;
          case 41 /* Light_Wave */:
            this.dynamicBackgroundContainer.style.setProperty("background", LightTheme_Wave_Background_Property);
            break;
          case 5 /* Dark_DigitalRain */:
            this.dynamicBackgroundContainer.style.setProperty("background", DarkTheme_Digital_Rain_Background_Property);
        }
      }
    });
  }
  SetDigitalRainBrightnessHelper() {
    if (this.dynamicBackgroundContainer) {
      SetBrightness(this.dynamicBackgroundContainer, this.settings.digitalRainBrightness);
    }
  }
  AddDynamicBackgroundEffect(effect) {
    switch (effect) {
      case 1 /* Dark_StarSky */:
        if (this.dynamicBackgroundContainer)
          Add_StarSky(this.dynamicBackgroundContainer);
        break;
      case 2 /* Dark_Snow */:
        if (this.dynamicBackgroundContainer)
          Add_Snow(this.dynamicBackgroundContainer);
        break;
      case 3 /* Dark_Rain */:
        if (this.dynamicBackgroundContainer)
          Add_Rain(this.dynamicBackgroundContainer);
        break;
      case 5 /* Dark_DigitalRain */:
        if (this.dynamicBackgroundContainer) {
          Add_DigitalRain(this.dynamicBackgroundContainer);
          this.SetDigitalRainBrightnessHelper();
        }
        break;
      case 4 /* Dark_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Add_RandomCircle(this.dynamicBackgroundContainer);
        break;
      case 40 /* Light_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Add_RandomCircle_Light(this.dynamicBackgroundContainer);
        break;
      case 41 /* Light_Wave */:
        if (this.dynamicBackgroundContainer)
          Add_Wave_Light(this.dynamicBackgroundContainer);
        break;
    }
  }
  RemoveDynamicBackgroundEffect(effect) {
    if (effect == -1 /* Unknown */)
      return;
    switch (effect) {
      case 1 /* Dark_StarSky */:
        if (this.dynamicBackgroundContainer)
          Remove_StarSky(this.dynamicBackgroundContainer);
        break;
      case 2 /* Dark_Snow */:
        if (this.dynamicBackgroundContainer)
          Remove_Snow(this.dynamicBackgroundContainer);
        break;
      case 3 /* Dark_Rain */:
        if (this.dynamicBackgroundContainer)
          Remove_Rain(this.dynamicBackgroundContainer);
        break;
      case 5 /* Dark_DigitalRain */:
        if (this.dynamicBackgroundContainer)
          Remove_DigitalRain(this.dynamicBackgroundContainer);
        break;
      case 4 /* Dark_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Remove_RandomCircle(this.dynamicBackgroundContainer);
        break;
      case 40 /* Light_RandomCircle */:
        if (this.dynamicBackgroundContainer)
          Remove_RandomCircle_Light(this.dynamicBackgroundContainer);
        break;
      case 41 /* Light_Wave */:
        if (this.dynamicBackgroundContainer)
          Remove_Wave_Light(this.dynamicBackgroundContainer);
        break;
    }
  }
};
var DynamicBackgroundSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Dynamic Background Plugin - Settings" });
    new import_obsidian.Setting(containerEl).setName("Dynamic Effect").setDesc("Select a dynamic effect").addDropdown((dropdown) => dropdown.addOption(5 /* Dark_DigitalRain */.toString(), "Dark - Matrix / Digital Rain").addOption(3 /* Dark_Rain */.toString(), "Dark - Rain").addOption(4 /* Dark_RandomCircle */.toString(), "Dark - Random Circle").addOption(2 /* Dark_Snow */.toString(), "Dark - Snow").addOption(1 /* Dark_StarSky */.toString(), "Dark - Star Sky").addOption(40 /* Light_RandomCircle */.toString(), "Light - Random Circle").addOption(41 /* Light_Wave */.toString(), "Light - Wave").setValue(this.plugin.settings.dynamicEffect.toString()).onChange((value) => __async(this, null, function* () {
      this.plugin.preDynamicEffect = this.plugin.settings.dynamicEffect;
      this.plugin.settings.dynamicEffect = Number(value);
      yield this.plugin.saveSettings();
      this.plugin.RemoveDynamicBackgroundEffect(this.plugin.preDynamicEffect);
      if (this.plugin.settings.enableDynamicEffect == true)
        this.plugin.AddDynamicBackgroundEffect(this.plugin.settings.dynamicEffect);
      this.plugin.SetDynamicBackgroundContainerBgProperty();
      this.display();
    })));
    if (this.plugin.settings.dynamicEffect == 5 /* Dark_DigitalRain */) {
      new import_obsidian.Setting(containerEl).setName("Brightness").setDesc("Set Digital Rain Brightness.").addSlider((tc) => {
        tc.setDynamicTooltip().setLimits(0.5, 1, 0.01).setValue(this.plugin.settings.digitalRainBrightness).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.digitalRainBrightness = value;
          this.plugin.SetDigitalRainBrightnessHelper();
          yield this.plugin.saveSettings();
        }));
      });
    }
    new import_obsidian.Setting(containerEl).setName("Enable Dynamic Effect").setDesc("Enable or disable dynamic effect").addToggle((tc) => tc.setValue(this.plugin.settings.enableDynamicEffect).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.enableDynamicEffect = value;
      yield this.plugin.saveSettings();
      if (this.plugin.settings.enableDynamicEffect == false) {
        this.plugin.RemoveDynamicBackgroundEffect(this.plugin.settings.dynamicEffect);
      } else {
        this.plugin.AddDynamicBackgroundEffect(this.plugin.settings.dynamicEffect);
      }
    })));
    new import_obsidian.Setting(containerEl).setName("Static Wallpaper Image").setDesc("Image file in Vault. Please use the relative path of the image file inside Vault.").addTextArea((text) => text.setValue(this.plugin.settings.backgroundImageFile).setPlaceholder("Example: attachments/moon.jpg or wallpapers/green.png").then((cb) => {
      cb.inputEl.style.width = "100%";
      cb.inputEl.rows = 5;
    }).onChange((value) => __async(this, null, function* () {
      this.plugin.settings.backgroundImageFile = value;
      yield this.plugin.saveSettings();
      this.plugin.SetDynamicBackgroundContainerBgProperty();
    })));
    new import_obsidian.Setting(containerEl).setName("Blur").setDesc("The blurriness of the wallpaper, 0 means no blur.").addSlider((tc) => {
      tc.setDynamicTooltip().setLimits(0, 100, 1).setValue(this.plugin.settings.blur).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.blur = value;
        yield this.plugin.saveSettings();
        this.plugin.SetWallpaperBlur();
      }));
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJlZmZlY3RzL2RhcmstZHluYW1pYy1zdGFyLXNreS50cyIsICJlZmZlY3RzL2RhcmstZHluYW1pYy1zbm93LnRzIiwgImVmZmVjdHMvZGFyay1keW5hbWljLXJhaW4udHMiLCAiZWZmZWN0cy9kYXJrLWR5bmFtaWMtcmFuZG9tLWNpcmNsZS50cyIsICJlZmZlY3RzL2xpZ2h0LWR5bmFtaWMtcmFuZG9tLWNpcmNsZS50cyIsICJlZmZlY3RzL2xpZ2h0LWR5bmFtaWMtd2F2ZS50cyIsICJlZmZlY3RzL2RhcmstZHluYW1pYy1kaWdpdGFsLXJhaW4udHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImltcG9ydCB7IEFwcCwgTW9kYWwsIFBsdWdpbiwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgRmlsZVN5c3RlbUFkYXB0ZXIsIG5vcm1hbGl6ZVBhdGggfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBBZGRfU3RhclNreSwgUmVtb3ZlX1N0YXJTa3l9IGZyb20gJ2VmZmVjdHMvZGFyay1keW5hbWljLXN0YXItc2t5JztcbmltcG9ydCB7IEFkZF9Tbm93LCBSZW1vdmVfU25vdywgRGFya1RoZW1lX1Nub3dfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9kYXJrLWR5bmFtaWMtc25vdyc7XG5pbXBvcnQgeyBBZGRfUmFpbiwgUmVtb3ZlX1JhaW4sIERhcmtUaGVtZV9SYWluX0JhY2tncm91bmRfUHJvcGVydHl9IGZyb20gJ2VmZmVjdHMvZGFyay1keW5hbWljLXJhaW4nO1xuaW1wb3J0IHsgQWRkX1JhbmRvbUNpcmNsZSwgUmVtb3ZlX1JhbmRvbUNpcmNsZSwgRGFya1RoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9kYXJrLWR5bmFtaWMtcmFuZG9tLWNpcmNsZSc7XG5pbXBvcnQgeyBBZGRfUmFuZG9tQ2lyY2xlX0xpZ2h0LCBSZW1vdmVfUmFuZG9tQ2lyY2xlX0xpZ2h0LCBMaWdodFRoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9saWdodC1keW5hbWljLXJhbmRvbS1jaXJjbGUnO1xuaW1wb3J0IHsgQWRkX1dhdmVfTGlnaHQsIFJlbW92ZV9XYXZlX0xpZ2h0LCBMaWdodFRoZW1lX1dhdmVfQmFja2dyb3VuZF9Qcm9wZXJ0eX0gZnJvbSAnZWZmZWN0cy9saWdodC1keW5hbWljLXdhdmUnO1xuaW1wb3J0IHsgQWRkX0RpZ2l0YWxSYWluLCBSZW1vdmVfRGlnaXRhbFJhaW4sIERhcmtUaGVtZV9EaWdpdGFsX1JhaW5fQmFja2dyb3VuZF9Qcm9wZXJ0eSwgU2V0QnJpZ2h0bmVzc30gZnJvbSAnZWZmZWN0cy9kYXJrLWR5bmFtaWMtZGlnaXRhbC1yYWluJztcbmltcG9ydCB7IER5bmFtaWNFZmZlY3RFbnVtIH0gZnJvbSAnY29tbW9uJztcbmltcG9ydCB7IER5bmFtaWNCYWNrZ3JvdW5kUGx1Z2luU2V0dGluZ3MgfSBmcm9tICdjb21tb24nO1xuaW1wb3J0ICogYXMgZnMgZnJvbSAnZnMnO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tICdwYXRoJztcblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRHluYW1pY0JhY2tncm91bmRQbHVnaW5TZXR0aW5ncyA9IHtcblx0ZHluYW1pY0VmZmVjdDogRHluYW1pY0VmZmVjdEVudW0uRGFya19TdGFyU2t5LFxuXHRkaWdpdGFsUmFpbkJyaWdodG5lc3M6IDAuNyxcblx0ZW5hYmxlRHluYW1pY0VmZmVjdDogdHJ1ZSxcblx0YmFja2dyb3VuZEltYWdlRmlsZTpcIlwiLFxuXHRibHVyOjBcbn0gXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER5bmFtaWNCYWNrZ3JvdW5kUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IER5bmFtaWNCYWNrZ3JvdW5kUGx1Z2luU2V0dGluZ3M7XG5cdHByZUR5bmFtaWNFZmZlY3Q6IER5bmFtaWNFZmZlY3RFbnVtO1xuXHRwcmVCYWNrZ3JvdWRJbWFnZUZpbGU6IGJvb2xlYW47XG5cdGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudHxudWxsO1xuXHR3YWxscGFwZXJDb3ZlcjogSFRNTERpdkVsZW1lbnQ7XG5cdFxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0Y29uc29sZS5sb2coXCJsb2FkaW5nIGR5bmFtaWMgYmFja2dyb3VuZCBwbHVnaW4uLi5cIik7XG5cblx0XHR0aGlzLnByZUR5bmFtaWNFZmZlY3QgPSBEeW5hbWljRWZmZWN0RW51bS5Vbmtub3duO1xuXHRcdFxuXG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNldHRpbmdzIHRhYiBzbyB0aGUgdXNlciBjYW4gY29uZmlndXJlIHZhcmlvdXMgYXNwZWN0cyBvZiB0aGUgcGx1Z2luXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBEeW5hbWljQmFja2dyb3VuZFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdHRoaXMuQWRkRHluYW1pY0JhY2tncm91bmRDb250YWluZXIoKTtcblxuXHRcdFx0dGhpcy5TZXREeW5hbWljQmFja2dyb3VuZENvbnRhaW5lckJnUHJvcGVydHkoKTtcblxuXHRcdFx0aWYodGhpcy5zZXR0aW5ncy5lbmFibGVEeW5hbWljRWZmZWN0ID09IHRydWUpe1xuXHRcdFx0XHR0aGlzLkFkZER5bmFtaWNCYWNrZ3JvdW5kRWZmZWN0KHRoaXMuc2V0dGluZ3MuZHluYW1pY0VmZmVjdCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvLyBXaGVuIHJlZ2lzdGVyaW5nIGludGVydmFscywgdGhpcyBmdW5jdGlvbiB3aWxsIGF1dG9tYXRpY2FsbHkgY2xlYXIgdGhlIGludGVydmFsIHdoZW4gdGhlIHBsdWdpbiBpcyBkaXNhYmxlZC5cblx0XHQvL3RoaXMucmVnaXN0ZXJJbnRlcnZhbCh3aW5kb3cuc2V0SW50ZXJ2YWwoKCkgPT4gY29uc29sZS5sb2coJ3NldEludGVydmFsJyksIDUgKiA2MCAqIDEwMDApKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdGNvbnNvbGUubG9nKFwidW5sb2FkaW5nIGR5bmFtaWMgYmFja2dyb3VuZCBwbHVnaW4uLi5cIik7XG5cblx0XHR0aGlzLlJlbW92ZUR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKCk7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxuXG5cdEFkZER5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKCl7XG4gIFx0bGV0IGRpdl9yb290ID0gYXBwLndvcmtzcGFjZS5jb250YWluZXJFbC5maW5kKFwiZGl2LndvcmtzcGFjZSA+IGRpdi5tb2Qtcm9vdFwiKTtcblx0XHRcblx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyID0gbnVsbDtcblxuICBcdGlmIChkaXZfcm9vdCkge1xuICAgIFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lciA9IGRpdl9yb290LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInJoLW9ic2lkaWFuLWR5bmFtaWMtYmFja2dyb3VuZC1jb250YWluZXJcIiB9KTtcblxuXHRcdFx0dGhpcy53YWxscGFwZXJDb3ZlciA9IHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwicmgtd2FsbHBhcGVyLWNvdmVyXCIgfSk7XG5cblx0XHRcdHRoaXMuU2V0V2FsbHBhcGVyQmx1cigpO1xuICBcdH1cblx0fVxuXG5cdFNldFdhbGxwYXBlckJsdXIoKXtcblx0XHRsZXQgdmFsdWUgPSBcImJsdXIoXCIrdGhpcy5zZXR0aW5ncy5ibHVyLnRvU3RyaW5nKCkrXCJweClcIjtcblx0XHR0aGlzLndhbGxwYXBlckNvdmVyLnN0eWxlLnNldFByb3BlcnR5KFwiZmlsdGVyXCIsdmFsdWUpO1xuXHR9XG5cblx0UmVtb3ZlRHluYW1pY0JhY2tncm91bmRDb250YWluZXIoKXtcblx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHR7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnJlbW92ZSgpO1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lciA9IG51bGw7XG5cdFx0fVxuXHR9XG5cblx0YXN5bmMgU2V0RHluYW1pY0JhY2tncm91bmRDb250YWluZXJCZ1Byb3BlcnR5KCl7XG5cdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIgPT0gbnVsbClcblx0XHRcdHJldHVybjtcblxuXHRcdGxldCBiYWNrZ3JvdW5kSW1hZ2VBbHJlYWR5U2V0ID0gZmFsc2U7XHRcblx0XHRsZXQgaW1hZ2VGdWxsRmlsZW5hbWU9XCJcIjtcblxuXHRcdHRyeSB7XG4gICAgICAgICAgICBpbWFnZUZ1bGxGaWxlbmFtZSA9IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIuZ2V0UmVzb3VyY2VQYXRoKHRoaXMuc2V0dGluZ3MuYmFja2dyb3VuZEltYWdlRmlsZSlcblxuICAgICAgICB9IGNhdGNoKGUpIHsgfVxuXHRcdFxuXHRcdGlmIChpbWFnZUZ1bGxGaWxlbmFtZSE9XCJcIil7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZFwiLFwidXJsKFxcXCJcIiArIGltYWdlRnVsbEZpbGVuYW1lICsgXCJcXFwiXCIpO1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmQtc2l6ZVwiLFwiY292ZXJcIik7XG5cdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZC1wb3NpdGlvblwiLFwiY2VudGVyXCIpO1xuXG5cdFx0XHRiYWNrZ3JvdW5kSW1hZ2VBbHJlYWR5U2V0ID0gdHJ1ZTtcblx0XHR9XG5cdFx0ZWxzZXtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIpO1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImJhY2tncm91bmQtc2l6ZVwiKTtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpO1xuXHRcdH1cblxuXHRcdGlmIChiYWNrZ3JvdW5kSW1hZ2VBbHJlYWR5U2V0ID09IGZhbHNlKXtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIpO1xuXHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5yZW1vdmVQcm9wZXJ0eShcImJhY2tncm91bmQtc2l6ZVwiKTtcblx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUucmVtb3ZlUHJvcGVydHkoXCJiYWNrZ3JvdW5kLXBvc2l0aW9uXCIpO1xuXG5cdFx0XHRpZih0aGlzLnNldHRpbmdzLmVuYWJsZUR5bmFtaWNFZmZlY3QgPT0gZmFsc2UpXG5cdFx0XHRcdHJldHVybjtcblxuXHRcdFx0c3dpdGNoKHRoaXMuc2V0dGluZ3MuZHluYW1pY0VmZmVjdCl7XG5cdFx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19TdGFyU2t5OlxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfU25vdzpcblx0XHRcdFx0XHR0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLnN0eWxlLnNldFByb3BlcnR5KFwiYmFja2dyb3VuZFwiLCBEYXJrVGhlbWVfU25vd19CYWNrZ3JvdW5kX1Byb3BlcnR5KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1JhaW46XG5cdFx0XHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIiwgRGFya1RoZW1lX1JhaW5fQmFja2dyb3VuZF9Qcm9wZXJ0eSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19SYW5kb21DaXJjbGU6XG5cdFx0XHRcdFx0dGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5zdHlsZS5zZXRQcm9wZXJ0eShcImJhY2tncm91bmRcIiwgRGFya1RoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eSk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uTGlnaHRfUmFuZG9tQ2lyY2xlOlxuXHRcdFx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIsIExpZ2h0VGhlbWVfUmFuZG9tX0NpcmNsZV9CYWNrZ3JvdW5kX1Byb3BlcnR5KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5MaWdodF9XYXZlOlxuXHRcdFx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIsIExpZ2h0VGhlbWVfV2F2ZV9CYWNrZ3JvdW5kX1Byb3BlcnR5KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX0RpZ2l0YWxSYWluOlxuXHRcdFx0XHRcdHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuc3R5bGUuc2V0UHJvcGVydHkoXCJiYWNrZ3JvdW5kXCIsIERhcmtUaGVtZV9EaWdpdGFsX1JhaW5fQmFja2dyb3VuZF9Qcm9wZXJ0eSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0U2V0RGlnaXRhbFJhaW5CcmlnaHRuZXNzSGVscGVyKCl7XG5cdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpe1xuXHRcdFx0U2V0QnJpZ2h0bmVzcyh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLCB0aGlzLnNldHRpbmdzLmRpZ2l0YWxSYWluQnJpZ2h0bmVzcyk7XG5cdFx0fVxuXHR9XG5cblx0QWRkRHluYW1pY0JhY2tncm91bmRFZmZlY3QoZWZmZWN0OiBEeW5hbWljRWZmZWN0RW51bSkge1xuXHRcdHN3aXRjaChlZmZlY3Qpe1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1N0YXJTa3k6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdEFkZF9TdGFyU2t5KHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19Tbm93OlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0XHRBZGRfU25vdyh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfUmFpbjpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0QWRkX1JhaW4odGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX0RpZ2l0YWxSYWluOlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0e1xuXHRcdFx0XHRcdEFkZF9EaWdpdGFsUmFpbih0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0XHR0aGlzLlNldERpZ2l0YWxSYWluQnJpZ2h0bmVzc0hlbHBlcigpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1JhbmRvbUNpcmNsZTpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0QWRkX1JhbmRvbUNpcmNsZSh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkxpZ2h0X1JhbmRvbUNpcmNsZTpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXHRcblx0XHRcdFx0XHRBZGRfUmFuZG9tQ2lyY2xlX0xpZ2h0KHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uTGlnaHRfV2F2ZTpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0QWRkX1dhdmVfTGlnaHQodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cbiAgfTtcblxuXHRSZW1vdmVEeW5hbWljQmFja2dyb3VuZEVmZmVjdChlZmZlY3Q6RHluYW1pY0VmZmVjdEVudW0pe1xuXHRcdGlmIChlZmZlY3QgPT0gRHluYW1pY0VmZmVjdEVudW0uVW5rbm93bilcblx0XHRcdHJldHVybjtcblxuXHRcdHN3aXRjaChlZmZlY3QpXG5cdFx0e1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1N0YXJTa3k6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdFJlbW92ZV9TdGFyU2t5KHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRHluYW1pY0VmZmVjdEVudW0uRGFya19Tbm93OlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0XHRSZW1vdmVfU25vdyh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfUmFpbjpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0UmVtb3ZlX1JhaW4odGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX0RpZ2l0YWxSYWluOlxuXHRcdFx0XHRpZiAodGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcilcblx0XHRcdFx0XHRSZW1vdmVfRGlnaXRhbFJhaW4odGhpcy5keW5hbWljQmFja2dyb3VuZENvbnRhaW5lcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBEeW5hbWljRWZmZWN0RW51bS5EYXJrX1JhbmRvbUNpcmNsZTpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0UmVtb3ZlX1JhbmRvbUNpcmNsZSh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkxpZ2h0X1JhbmRvbUNpcmNsZTpcblx0XHRcdFx0aWYgKHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpXG5cdFx0XHRcdFx0UmVtb3ZlX1JhbmRvbUNpcmNsZV9MaWdodCh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIER5bmFtaWNFZmZlY3RFbnVtLkxpZ2h0X1dhdmU6XG5cdFx0XHRcdGlmICh0aGlzLmR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKVxuXHRcdFx0XHRcdFJlbW92ZV9XYXZlX0xpZ2h0KHRoaXMuZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuXHRcdFx0XHRicmVhaztcblx0XHR9XG4gIH07XG59XG5cbmNsYXNzIER5bmFtaWNCYWNrZ3JvdW5kTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLnNldFRleHQoJ1dvYWghJyk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBEeW5hbWljQmFja2dyb3VuZFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBEeW5hbWljQmFja2dyb3VuZFBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEeW5hbWljQmFja2dyb3VuZFBsdWdpbikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywge3RleHQ6ICdEeW5hbWljIEJhY2tncm91bmQgUGx1Z2luIC0gU2V0dGluZ3MnfSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdEeW5hbWljIEVmZmVjdCcpXG5cdFx0XHQuc2V0RGVzYygnU2VsZWN0IGEgZHluYW1pYyBlZmZlY3QnKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cbiAgICAgICAgZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9uKER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfRGlnaXRhbFJhaW4udG9TdHJpbmcoKSwgXCJEYXJrIC0gTWF0cml4IC8gRGlnaXRhbCBSYWluXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihEeW5hbWljRWZmZWN0RW51bS5EYXJrX1JhaW4udG9TdHJpbmcoKSwgXCJEYXJrIC0gUmFpblwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oRHluYW1pY0VmZmVjdEVudW0uRGFya19SYW5kb21DaXJjbGUudG9TdHJpbmcoKSwgXCJEYXJrIC0gUmFuZG9tIENpcmNsZVwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oRHluYW1pY0VmZmVjdEVudW0uRGFya19Tbm93LnRvU3RyaW5nKCksIFwiRGFyayAtIFNub3dcIilcblx0XHRcdFx0XHQuYWRkT3B0aW9uKER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfU3RhclNreS50b1N0cmluZygpLCBcIkRhcmsgLSBTdGFyIFNreVwiKVxuXHRcdFx0XHRcdC5hZGRPcHRpb24oRHluYW1pY0VmZmVjdEVudW0uTGlnaHRfUmFuZG9tQ2lyY2xlLnRvU3RyaW5nKCksIFwiTGlnaHQgLSBSYW5kb20gQ2lyY2xlXCIpXG5cdFx0XHRcdFx0LmFkZE9wdGlvbihEeW5hbWljRWZmZWN0RW51bS5MaWdodF9XYXZlLnRvU3RyaW5nKCksIFwiTGlnaHQgLSBXYXZlXCIpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmR5bmFtaWNFZmZlY3QudG9TdHJpbmcoKSlcbiAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5wcmVEeW5hbWljRWZmZWN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHluYW1pY0VmZmVjdDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmR5bmFtaWNFZmZlY3QgPSBOdW1iZXIodmFsdWUpO1xuICAgICAgICAgICAgXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uUmVtb3ZlRHluYW1pY0JhY2tncm91bmRFZmZlY3QodGhpcy5wbHVnaW4ucHJlRHluYW1pY0VmZmVjdCk7XG5cblx0XHRcdFx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVEeW5hbWljRWZmZWN0ID09IHRydWUpXG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLkFkZER5bmFtaWNCYWNrZ3JvdW5kRWZmZWN0KHRoaXMucGx1Z2luLnNldHRpbmdzLmR5bmFtaWNFZmZlY3QpO1xuXG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5TZXREeW5hbWljQmFja2dyb3VuZENvbnRhaW5lckJnUHJvcGVydHkoKTtcblxuXHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgfSlcbiAgICAgICk7XHRcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5keW5hbWljRWZmZWN0ID09IER5bmFtaWNFZmZlY3RFbnVtLkRhcmtfRGlnaXRhbFJhaW4pXG5cdFx0e1xuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkJyaWdodG5lc3NcIilcblx0XHRcdC5zZXREZXNjKFwiU2V0IERpZ2l0YWwgUmFpbiBCcmlnaHRuZXNzLlwiKVxuXHRcdFx0LmFkZFNsaWRlcih0YyA9PiB7XG5cdFx0XHRcdHRjLnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdFx0XHQuc2V0TGltaXRzKDAuNTAsIDEsIDAuMDEpXG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmRpZ2l0YWxSYWluQnJpZ2h0bmVzcylcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlnaXRhbFJhaW5CcmlnaHRuZXNzID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5TZXREaWdpdGFsUmFpbkJyaWdodG5lc3NIZWxwZXIoKTtcblxuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcdFxuXHRcdH1cblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0VuYWJsZSBEeW5hbWljIEVmZmVjdCcpXG5cdFx0XHQuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgZHluYW1pYyBlZmZlY3QnKVxuXHRcdFx0LmFkZFRvZ2dsZSgodGMpID0+IFxuXHRcdFx0XHR0Yy5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVEeW5hbWljRWZmZWN0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmModmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVEeW5hbWljRWZmZWN0ID0gdmFsdWU7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cblx0XHRcdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlRHluYW1pY0VmZmVjdCA9PSBmYWxzZSl7XG5cdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5SZW1vdmVEeW5hbWljQmFja2dyb3VuZEVmZmVjdCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5keW5hbWljRWZmZWN0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZXtcblx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLkFkZER5bmFtaWNCYWNrZ3JvdW5kRWZmZWN0KHRoaXMucGx1Z2luLnNldHRpbmdzLmR5bmFtaWNFZmZlY3QpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdCk7XHRcdFx0XHRcblxuXHRcdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnU3RhdGljIFdhbGxwYXBlciBJbWFnZScpXG5cdFx0XHQuc2V0RGVzYyhcIkltYWdlIGZpbGUgaW4gVmF1bHQuIFBsZWFzZSB1c2UgdGhlIHJlbGF0aXZlIHBhdGggb2YgdGhlIGltYWdlIGZpbGUgaW5zaWRlIFZhdWx0LlwiKVxuXHRcdFx0LmFkZFRleHRBcmVhKCh0ZXh0KSA9PlxuICAgICAgICB0ZXh0XG5cdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJhY2tncm91bmRJbWFnZUZpbGUpXG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogYXR0YWNobWVudHMvbW9vbi5qcGcgb3Igd2FsbHBhcGVycy9ncmVlbi5wbmdcIiApXG5cdFx0XHRcdFx0LnRoZW4oKGNiKSA9PiB7XG5cdFx0XHRcdFx0XHRjYi5pbnB1dEVsLnN0eWxlLndpZHRoID0gXCIxMDAlXCI7XG5cdFx0XHRcdFx0XHRjYi5pbnB1dEVsLnJvd3MgPSA1O1xuXHRcdFx0XHRcdH0pXG4gICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmFja2dyb3VuZEltYWdlRmlsZSA9IHZhbHVlO1xuXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uU2V0RHluYW1pY0JhY2tncm91bmRDb250YWluZXJCZ1Byb3BlcnR5KCk7XG5cdFx0XHRcdFx0fSlcbiAgICAgICk7XG5cblx0XHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0JsdXInKVxuXHRcdFx0LnNldERlc2MoJ1RoZSBibHVycmluZXNzIG9mIHRoZSB3YWxscGFwZXIsIDAgbWVhbnMgbm8gYmx1ci4nKVxuXHRcdFx0LmFkZFNsaWRlcih0YyA9PiB7XG5cdFx0XHRcdHRjLnNldER5bmFtaWNUb29sdGlwKClcblx0XHRcdFx0XHQuc2V0TGltaXRzKDAsIDEwMCwgMSlcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmx1cilcblx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmx1ciA9IHZhbHVlO1xuXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uU2V0V2FsbHBhcGVyQmx1cigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XHRcblx0fVxufVxuIiwgIi8vIEFkZCBTdGFyIFNreSBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gQWRkX1N0YXJTa3koZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgaWYgKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKSB7XG4gICAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9kYi1kdC1zdGFyLXNreS1keW5hbWljLWVmZmVjdFwiIH0pO1xuXG4gICAgZWZmZWN0LmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcInN0YXItc2t5XCIgfSk7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIFN0YXIgU2t5IGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVfU3RhclNreShkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuZmluZChcImRpdi5vZGItZHQtc3Rhci1za3ktZHluYW1pYy1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3QpIHtcbiAgICBlZmZlY3QucmVtb3ZlKCk7XG4gIH1cbn07IiwgImV4cG9ydCBsZXQgRGFya1RoZW1lX1Nub3dfQmFja2dyb3VuZF9Qcm9wZXJ0eSA9IFwicmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgYXQgYm90dG9tLCAjMWIyNzM1IDIwJSwgIzA5MGEwZiAxMDAlKVwiO1xuXG4vLyBBZGQgU25vdyBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gQWRkX1Nub3coZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgaWYgKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKSB7XG4gICAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9kYi1kdC1zbm93LWR5bmFtaWMtZWZmZWN0XCIgfSk7XG5cbiAgICBlZmZlY3QuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwic25vd1wiIH0pO1xuICB9XG59XG5cbi8vIFJlbW92ZSBTbm93IGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVfU25vdyhkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuZmluZChcImRpdi5vZGItZHQtc25vdy1keW5hbWljLWVmZmVjdFwiKTtcbiAgaWYgKGVmZmVjdCkge1xuICAgIGVmZmVjdC5yZW1vdmUoKTtcbiAgfVxufTsiLCAiZXhwb3J0IGxldCBEYXJrVGhlbWVfUmFpbl9CYWNrZ3JvdW5kX1Byb3BlcnR5ID0gXCJyYWRpYWwtZ3JhZGllbnQoZWxsaXBzZSBhdCBib3R0b20sICMxYjI3MzUgMjAlLCAjMDkwYTBmIDEwMCUpXCI7XG5cbi8vIEFkZCBSYWluIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBBZGRfUmFpbihkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBpZiAoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpIHtcbiAgICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2RiLWR0LXJhaW4tZHluYW1pYy1lZmZlY3RcIiB9KTtcblxuICAgIGxldCBkcm9wMSA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiAzNDsgLS15OiA5MDsgLS1vOiAwLjY2NTQxNTM4MDQ2ODMyNjQ7IC0tYTogMC45OTE3NzEwMTU2OTQ1ODk2OyAtLWQ6IC0wLjgwNDM0MjU3NDA3NDQ4MTQ7IC0tczogMC42OTUxMTQyMzQ5ODA0MDk2XCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3AyID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDQ5OyAtLXk6IDgxOyAtLW86IDAuMDMxNzUwOTk0MTUwNTQ2NTsgLS1hOiAxLjQxNTAzNDA3OTYwNDE5NDc7IC0tZDogLTAuODk3NzA2MDQ3NTk5MDYxNTsgLS1zOiAwLjM1NjA5MjYwMzg3NTg5NzZcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDMgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogOTM7IC0teTogNjsgLS1vOiAwLjY1MzYxNDcxNjQyMDUyMjk7IC0tYTogMS4zMTUwOTgwNzIyMDgyNTQ4OyAtLWQ6IC0wLjU0OTM2MzcxNzc4MjE1MzM7IC0tczogMC41NTUyMTMyMzcwMjQ3MTAzXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3A0ID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDIyOyAtLXk6IDEzOyAtLW86IDAuNDI1OTYwMDAwNDA3ODk0NzsgLS1hOiAwLjU4NTQyODUxODUzNzc3MzQ7IC0tZDogLTAuNTI5MzEzNTAwMTE4MDI1ODsgLS1zOiAwLjM1MjY3NjA4NzgzMjU5MjVcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDUgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogMzY7IC0teTogMjA7IC0tbzogMC41NjA5NDQ4NDU5MDYzNjY1OyAtLWE6IDEuNDI1Mjk1NjEzMzcxMTExNzsgLS1kOiAtMC43NjkwMTMxNTk0OTg2MjUxOyAtLXM6IDAuNjY4OTIyMzQ3MTU5OTk0MVwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wNiA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiA0ODsgLS15OiA1NDsgLS1vOiAwLjI4NTA2MDEzNDMxODAwNTc7IC0tYTogMS40MjM1NjM1MDI2MDE4NjgzOyAtLWQ6IC0wLjQ1MjM1Njg0Mjc1OTgxNzk7IC0tczogMC4xOTc2MzMzMzc2NjU3MDMxMlwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wNyA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiAxNjsgLS15OiA0OyAtLW86IDAuNDIyNDM2NzQ5MjE2NDk5MzsgLS1hOiAwLjkyOTE1NzAyNTE1NzM0MjI7IC0tZDogLTAuNzA3MjI4ODY1MDA3MjkzMTsgLS1zOiAwLjMyMjUwMDU5ODY5Njg3ODNcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDggPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogNTA7IC0teTogNTI7IC0tbzogMC41MTYzNzI0OTQ0NjQ4NzE2OyAtLWE6IDAuNTE2MzQxNzI1MDcyMTM5MjsgLS1kOiAtMC4yNDU2MjY3NTg0NDkwNDg1ODsgLS1zOiAwLjc0NjIyNzcyNDMxOTg1MjdcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDkgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogMzU7IC0teTogNjY7IC0tbzogMC4zMTIwNjQwMjE3NDI0NDk3NDsgLS1hOiAwLjYwNTk3NDQzNTY1NDE2MzQ7IC0tZDogMC4zNzkwNjU0ODc3OTMyODU5NzsgLS1zOiAwLjczMDc0MTg2NjI2MzM3MTZcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDEwID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDY0OyAtLXk6IDgxOyAtLW86IDAuODE1ODEwMjgwNzUwODYxMTsgLS1hOiAwLjY3MjI3MTg2ODI2NzI1MDI7IC0tZDogMC4yNDQ0MjE1NzQ3OTU0MzQ4OyAtLXM6IDAuODY2NzI1MDE5NTA0NjU0N1wiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMTEgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogODg7IC0teTogMzU7IC0tbzogMC4wMjc2MjgxNTI1MzQ0MTU1MzsgLS1hOiAwLjk1NTU0Njg3NDk4NDM0ODg7IC0tZDogMC4wODk5NjMxOTAzMTUwMDM3NzsgLS1zOiAwLjc0MjgyODE2MTA4NjExMjlcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDEyID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDg4OyAtLXk6IDkxOyAtLW86IDAuNjEwMzEzNDg0NzkxOTg0NDsgLS1hOiAwLjkwMDE3MzQzNDU1Mzk2OTg7IC0tZDogLTAuOTE3MzUxMDIxNTc2ODIzOyAtLXM6IDAuMDA0MDU0MjM5OTE1NTg1NFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wMTMgPSAnPHN2ZyBjbGFzcz1cInJhaW5fX2Ryb3BcIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPVwieE1pbllNaW5cIiB2aWV3Qm94PVwiMCAwIDUgNTBcIiBzdHlsZT1cIi0teDogNjI7IC0teTogNTQ7IC0tbzogMC4yODU2Nzk2MjA4MzE3NzI5OyAtLWE6IDAuOTA0NjU1NDEzMTI0MTEzODsgLS1kOiAtMC4xMzY0NTgwOTg2NjQwMDUxNjsgLS1zOiAwLjU3MzkwNzkyNDc5NDc1NTZcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDE0ID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDI2OyAtLXk6IDY3OyAtLW86IDAuMzI0OTc3NzU5MzkzNzI5MzsgLS1hOiAxLjAyNzQzNTA2NjQwOTAwNzM7IC0tZDogLTAuODYwNTY4ODE1OTEyMTY0NzsgLS1zOiAwLjcxOTk4OTMyMTQ1MDAzNDFcIj48cGF0aCBzdHJva2U9XCJub25lXCIgZD1cIk0gMi41LDAgQyAyLjY5NDk0NTgsMy41MzkyMDE3IDMuMzQ0NzY1LDIwLjUyNDU3MSA0LjQ0OTQ1NzcsMzAuOTU1OSA1Ljc1NTEzNTcsNDIuNjY2NzUzIDQuNTkxNTY4NSw1MCAyLjUsNTAgMC40MDg0MzE1Miw1MCAtMC43NTUxMzU2NSw0Mi42NjY3NTMgMC41NTA1NDIzNCwzMC45NTU5IDEuNjU1MjM1LDIwLjUyNDU3MSAyLjMwNTA1NDIsMy41MzkyMDE3IDIuNSwwIFpcIj48L3BhdGg+PC9zdmc+JztcbiAgICBsZXQgZHJvcDE1ID0gJzxzdmcgY2xhc3M9XCJyYWluX19kcm9wXCIgcHJlc2VydmVBc3BlY3RSYXRpbz1cInhNaW5ZTWluXCIgdmlld0JveD1cIjAgMCA1IDUwXCIgc3R5bGU9XCItLXg6IDc0OyAtLXk6IDM5OyAtLW86IDAuNjA4NTE3Njc3Mzg2NTk1OTsgLS1hOiAxLjE2NDczMjQ5NjIzODkwNTg7IC0tZDogLTAuMDg2NDMwNDg1MzQ1ODc5NDk7IC0tczogMC41NDQ5NDIxODAyODYwMjgxXCI+PHBhdGggc3Ryb2tlPVwibm9uZVwiIGQ9XCJNIDIuNSwwIEMgMi42OTQ5NDU4LDMuNTM5MjAxNyAzLjM0NDc2NSwyMC41MjQ1NzEgNC40NDk0NTc3LDMwLjk1NTkgNS43NTUxMzU3LDQyLjY2Njc1MyA0LjU5MTU2ODUsNTAgMi41LDUwIDAuNDA4NDMxNTIsNTAgLTAuNzU1MTM1NjUsNDIuNjY2NzUzIDAuNTUwNTQyMzQsMzAuOTU1OSAxLjY1NTIzNSwyMC41MjQ1NzEgMi4zMDUwNTQyLDMuNTM5MjAxNyAyLjUsMCBaXCI+PC9wYXRoPjwvc3ZnPic7XG4gICAgbGV0IGRyb3AxNiA9ICc8c3ZnIGNsYXNzPVwicmFpbl9fZHJvcFwiIHByZXNlcnZlQXNwZWN0UmF0aW89XCJ4TWluWU1pblwiIHZpZXdCb3g9XCIwIDAgNSA1MFwiIHN0eWxlPVwiLS14OiAzOyAtLXk6IDc4OyAtLW86IDAuNzQxMzE1NDIyNzkxNzEwNTsgLS1hOiAwLjcwODIxMzcxNzU4NjU5MTc7IC0tZDogMC45MzE2Mjk1MzgyNjA1MDY7IC0tczogMC40ODMzNTQ2NTUwMDY0MjI5NFwiPjxwYXRoIHN0cm9rZT1cIm5vbmVcIiBkPVwiTSAyLjUsMCBDIDIuNjk0OTQ1OCwzLjUzOTIwMTcgMy4zNDQ3NjUsMjAuNTI0NTcxIDQuNDQ5NDU3NywzMC45NTU5IDUuNzU1MTM1Nyw0Mi42NjY3NTMgNC41OTE1Njg1LDUwIDIuNSw1MCAwLjQwODQzMTUyLDUwIC0wLjc1NTEzNTY1LDQyLjY2Njc1MyAwLjU1MDU0MjM0LDMwLjk1NTkgMS42NTUyMzUsMjAuNTI0NTcxIDIuMzA1MDU0MiwzLjUzOTIwMTcgMi41LDAgWlwiPjwvcGF0aD48L3N2Zz4nO1xuICAgIGxldCBkcm9wcyA9IGRyb3AxICsgZHJvcDIgKyBkcm9wMyArIGRyb3A0ICsgZHJvcDUgKyBkcm9wNiArIGRyb3A3ICsgZHJvcDggKyBkcm9wOSArIGRyb3AxMDtcbiAgICBkcm9wcyArPSBkcm9wMTEgKyBkcm9wMTIgKyBkcm9wMTMgKyBkcm9wMTQgKyBkcm9wMTUgKyBkcm9wMTY7XG4gICAgZWZmZWN0LmlubmVySFRNTCArPSAgZHJvcHM7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIFJhaW4gZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgZGFyayB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIFJlbW92ZV9SYWluKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1yYWluLWR5bmFtaWMtZWZmZWN0XCIpO1xuICBpZiAoZWZmZWN0KSB7XG4gICAgZWZmZWN0LnJlbW92ZSgpO1xuICB9XG59IiwgImV4cG9ydCBsZXQgRGFya1RoZW1lX1JhbmRvbV9DaXJjbGVfQmFja2dyb3VuZF9Qcm9wZXJ0eSA9IFwicmFkaWFsLWdyYWRpZW50KGVsbGlwc2UgYXQgYm90dG9tLCAjMWIyNzM1IDIwJSwgIzA5MGEwZiAxMDAlKVwiO1xuXG4vLyBBZGQgUmFuZG9tIENpcmNsZSBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gQWRkX1JhbmRvbUNpcmNsZShkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBsZXQgZWZmZWN0U2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudDtcblxuICBpZiAoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpIHtcbiAgICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2RiLWR0LXJhbmRvbS1jaXJjbGUtZHluYW1pYy1lZmZlY3RcIiB9KTtcblxuICAgIGVmZmVjdC5jcmVhdGVFbChcImNhbnZhc1wiKTtcblxuICAgIGxldCBjb2RlID0gYFxuICAgICAgdmFyIG9kYl9yYW5kb21fY2lyY2xlX2N0eDtcbiAgICAgIHZhciBvZGJfcmFuZG9tX2NpcmNsZV9ncmQ7XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TdGFydCgpIHtcbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYub2RiLWR0LXJhbmRvbS1jaXJjbGUtZHluYW1pYy1lZmZlY3QgY2FudmFzXCIpO1xuICAgICAgICBjYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHggPSBjYW52YXMuZ2V0Q29udGV4dChcIjJkXCIpO1xuXG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2dyZCA9IG9kYl9yYW5kb21fY2lyY2xlX2N0eC5jcmVhdGVMaW5lYXJHcmFkaWVudCgwLCB3aW5kb3cuaW5uZXJIZWlnaHQsIDAsIDApO1xuXG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsU3R5bGUgPSBvZGJfcmFuZG9tX2NpcmNsZV9ncmQ7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9BbmltYXRlKCk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9GaXJld29yayh4LCB5KSB7XG4gICAgICAgIHRoaXMueCA9IHg7XG4gICAgICAgIHRoaXMueSA9IHk7XG4gICAgICAgIHRoaXMucmFkaXVzID0gNTtcbiAgICAgICAgdGhpcy50aW1lID0gMDtcbiAgICAgICAgdGhpcy5saWZlc3BhbiA9IE1hdGgucmFuZG9tKCkqMTgwICsgMTUwO1xuXG4gICAgICAgIHRoaXMuZHJhdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguYXJjKHRoaXMueCwgd2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy55LCB0aGlzLnJhZGl1cywgMCwgMipNYXRoLlBJLCBmYWxzZSk7XG4gICAgICAgICAgdmFyIGFscGhhID0gKHRoaXMubGlmZXNwYW4gLSB0aGlzLnRpbWUpL3RoaXMubGlmZXNwYW47XG4gICAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LnN0cm9rZVN0eWxlID0gXCJyZ2JhKDI1NSwgMjU1LCAyNTUsIFwiICsgYWxwaGEgKyBcIilcIjtcbiAgICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguc3Ryb2tlKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICh0aGlzLnRpbWUgPCB0aGlzLmxpZmVzcGFuKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGl1cyArPSAuMjU7XG4gICAgICAgICAgICB0aGlzLnRpbWUgKz0gMTtcbiAgICAgICAgICAgIHRoaXMuZHJhdygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgZmlyZXdvcmtzID0gW107XG4gICAgICB2YXIgdGltZSA9IDA7XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9BbmltYXRlKCkge1xuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguY2xlYXJSZWN0KDAsIDAsIHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguZmlsbFN0eWxlID0gb2RiX3JhbmRvbV9jaXJjbGVfZ3JkO1xuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguZmlsbFJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICBpZiAodGltZSAlIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSoxMDAgKyA0MCkgPT0gMCkge1xuICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKndpbmRvdy5pbm5lcldpZHRoKTtcbiAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSp3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgICAgICAgIGZpcmV3b3Jrcy5wdXNoKG5ldyBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfRmlyZXdvcmsoeCwgeSkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZmlyZXdvcmtzLmZvckVhY2goZmlyZXdvcmsgPT4ge1xuICAgICAgICAgIGZpcmV3b3JrLnVwZGF0ZSgpO1xuICAgICAgICAgIGlmICgoZmlyZXdvcmsudGltZSAtIGZpcmV3b3JrLmV4cGxvc2lvblRpbWUpID4gMjApIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlyZXdvcmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChmaXJld29yayA9PT0gZmlyZXdvcmtzW2ldKSB7XG4gICAgICAgICAgICAgICAgZGVsZXRlIGZpcmV3b3Jrc1tpXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIHRpbWUgKz0gMTtcblxuICAgICAgICBpZiAoT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGUpXG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9BbmltYXRlKTtcbiAgICAgIH1cblxuICAgICAgT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1N0YXJ0KCk7XG4gICAgYFxuICAgIGVmZmVjdFNjcmlwdCA9IGVmZmVjdC5jcmVhdGVFbChcInNjcmlwdFwiKTtcbiAgICBlZmZlY3RTY3JpcHQudGV4dENvbnRlbnQgPSBjb2RlO1xuICB9XG59XG5cbi8vIFJlbW92ZSBSYW5kb20gQ2lyY2xlIGR5bmFtaWMgYmFja2dyb3VuZCBlZmZlY3QgZm9yIGRhcmsgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVfUmFuZG9tQ2lyY2xlKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1yYW5kb20tY2lyY2xlLWR5bmFtaWMtZWZmZWN0XCIpO1xuICBpZiAoZWZmZWN0KSB7XG4gICAgZWZmZWN0LnJlbW92ZSgpO1xuICB9XG5cbiAgVW5sb2FkX0VmZmVjdF9TY3JpcHQoKTtcbn1cblxuZnVuY3Rpb24gVW5sb2FkX0VmZmVjdF9TY3JpcHQoKVxue1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnRcIl0gPSBudWxsO1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfRmlyZXdvcmtcIl0gPSBudWxsO1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZVwiXSA9IG51bGw7XG59IiwgImV4cG9ydCBsZXQgTGlnaHRUaGVtZV9SYW5kb21fQ2lyY2xlX0JhY2tncm91bmRfUHJvcGVydHkgPSBcImxpbmVhci1ncmFkaWVudCgwZGVnLCByZ2JhKDI1NSwyNTUsMjU1LDEpIDYyJSwgcmdiYSgyMzAsMjQ0LDI1NSwxKSAxMDAlKVwiO1xuXG4vLyBBZGQgUmFuZG9tIENpcmNsZSBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBsaWdodCB0aGVtZVxuZXhwb3J0IGZ1bmN0aW9uIEFkZF9SYW5kb21DaXJjbGVfTGlnaHQoZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdFNjcmlwdDogSFRNTFNjcmlwdEVsZW1lbnQ7XG5cbiAgaWYgKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyKSB7XG4gICAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmNyZWF0ZUVsKFwiZGl2XCIsIHsgY2xzOiBcIm9kYi1sdC1yYW5kb20tY2lyY2xlLWR5bmFtaWMtZWZmZWN0XCIgfSk7XG5cbiAgICBlZmZlY3QuY3JlYXRlRWwoXCJjYW52YXNcIik7XG5cbiAgICBsZXQgY29kZSA9IGBcbiAgICAgIHZhciBvZGJfcmFuZG9tX2NpcmNsZV9jdHg7XG4gICAgICB2YXIgb2RiX3JhbmRvbV9jaXJjbGVfZ3JkO1xuXG4gICAgICBmdW5jdGlvbiBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnQoKSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2Lm9kYi1sdC1yYW5kb20tY2lyY2xlLWR5bmFtaWMtZWZmZWN0IGNhbnZhc1wiKTtcbiAgICAgICAgY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIGNhbnZhcy5oZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4ID0gY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcblxuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9ncmQgPSBvZGJfcmFuZG9tX2NpcmNsZV9jdHguY3JlYXRlTGluZWFyR3JhZGllbnQoMCwgd2luZG93LmlubmVySGVpZ2h0LCAwLCAwKTtcblxuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguZmlsbFN0eWxlID0gb2RiX3JhbmRvbV9jaXJjbGVfZ3JkO1xuICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguZmlsbFJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgIFxuICAgICAgICBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZSgpO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfRmlyZXdvcmsoeCwgeSkge1xuICAgICAgICB0aGlzLnggPSB4O1xuICAgICAgICB0aGlzLnkgPSB5O1xuICAgICAgICB0aGlzLnJhZGl1cyA9IDU7XG4gICAgICAgIHRoaXMudGltZSA9IDA7XG4gICAgICAgIHRoaXMubGlmZXNwYW4gPSBNYXRoLnJhbmRvbSgpKjE4MCArIDE1MDtcblxuICAgICAgICB0aGlzLmRyYXcgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBvZGJfcmFuZG9tX2NpcmNsZV9jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgb2RiX3JhbmRvbV9jaXJjbGVfY3R4LmFyYyh0aGlzLngsIHdpbmRvdy5pbm5lckhlaWdodCAtIHRoaXMueSwgdGhpcy5yYWRpdXMsIDAsIDIqTWF0aC5QSSwgZmFsc2UpO1xuICAgICAgICAgIHZhciBhbHBoYSA9ICh0aGlzLmxpZmVzcGFuIC0gdGhpcy50aW1lKS90aGlzLmxpZmVzcGFuO1xuICAgICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5zdHJva2VTdHlsZSA9IFwicmdiYSgwLCAxMjgsIDI1NSwgXCIgKyBhbHBoYSArIFwiKVwiO1xuICAgICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5zdHJva2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGltZSA8IHRoaXMubGlmZXNwYW4pIHtcbiAgICAgICAgICAgIHRoaXMucmFkaXVzICs9IC4yNTtcbiAgICAgICAgICAgIHRoaXMudGltZSArPSAxO1xuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHZhciBmaXJld29ya3MgPSBbXTtcbiAgICAgIHZhciB0aW1lID0gMDtcblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGUoKSB7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5jbGVhclJlY3QoMCwgMCwgd2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsU3R5bGUgPSBvZGJfcmFuZG9tX2NpcmNsZV9ncmQ7XG4gICAgICAgIG9kYl9yYW5kb21fY2lyY2xlX2N0eC5maWxsUmVjdCgwLCAwLCB3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICAgICAgXG4gICAgICAgIGlmICh0aW1lICUgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKjEwMCArIDQwKSA9PSAwKSB7XG4gICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqd2luZG93LmlubmVyV2lkdGgpO1xuICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKndpbmRvdy5pbm5lckhlaWdodCk7XG4gICAgICAgICAgZmlyZXdvcmtzLnB1c2gobmV3IE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9GaXJld29yayh4LCB5KSk7XG4gICAgICAgIH1cblxuICAgICAgICBmaXJld29ya3MuZm9yRWFjaChmaXJld29yayA9PiB7XG4gICAgICAgICAgZmlyZXdvcmsudXBkYXRlKCk7XG4gICAgICAgICAgaWYgKChmaXJld29yay50aW1lIC0gZmlyZXdvcmsuZXhwbG9zaW9uVGltZSkgPiAyMCkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaXJld29ya3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgaWYgKGZpcmV3b3JrID09PSBmaXJld29ya3NbaV0pIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgZmlyZXdvcmtzW2ldO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgdGltZSArPSAxO1xuXG4gICAgICAgIGlmIChPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfQW5pbWF0ZSlcbiAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGUpO1xuICAgICAgfVxuXG4gICAgICBPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnQoKTtcbiAgICBgXG4gICAgZWZmZWN0U2NyaXB0ID0gZWZmZWN0LmNyZWF0ZUVsKFwic2NyaXB0XCIpO1xuICAgIGVmZmVjdFNjcmlwdC50ZXh0Q29udGVudCA9IGNvZGU7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIFJhbmRvbSBDaXJjbGUgZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgbGlnaHQgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBSZW1vdmVfUmFuZG9tQ2lyY2xlX0xpZ2h0KGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1sdC1yYW5kb20tY2lyY2xlLWR5bmFtaWMtZWZmZWN0XCIpO1xuICBpZiAoZWZmZWN0KSB7XG4gICAgZWZmZWN0LnJlbW92ZSgpO1xuICB9XG5cbiAgVW5sb2FkX0VmZmVjdF9TY3JpcHQoKTtcbn1cblxuZnVuY3Rpb24gVW5sb2FkX0VmZmVjdF9TY3JpcHQoKXtcbiAgd2luZG93W1wiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1N0YXJ0XCJdID0gbnVsbDtcbiAgd2luZG93W1wiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0ZpcmV3b3JrXCJdID0gbnVsbDtcbiAgd2luZG93W1wiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0FuaW1hdGVcIl0gPSBudWxsO1xufSIsICJleHBvcnQgbGV0IExpZ2h0VGhlbWVfV2F2ZV9CYWNrZ3JvdW5kX1Byb3BlcnR5ID0gXCJsaW5lYXItZ3JhZGllbnQoMGRlZywgcmdiYSgyNTUsMjU1LDI1NSwxKSA2MCUsIHJnYmEoMjAxLDIzMywyNTUsMSkgMTAwJSlcIjtcblxuLy8gQWRkIFdhdmUgZHluYW1pYyBiYWNrZ3JvdW5kIGVmZmVjdCBmb3IgbGlnaHQgdGhlbWVcbmV4cG9ydCBmdW5jdGlvbiBBZGRfV2F2ZV9MaWdodChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQpe1xuICBsZXQgZWZmZWN0U2NyaXB0OiBIVE1MU2NyaXB0RWxlbWVudDtcblxuICBpZiAoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpIHtcbiAgICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2RiLWx0LXdhdmUtZWZmZWN0XCIgfSk7XG5cbiAgICBlZmZlY3QuY3JlYXRlRWwoXCJkaXZcIiwgeyBjbHM6IFwib2NlYW5cIiB9KTtcblxuICAgIGxldCBjb2RlID0gYFxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1Nob3dXYXZlKCkge1xuICAgICAgICB2YXIgb2NlYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2Lm9kYi1sdC13YXZlLWVmZmVjdCBkaXYub2NlYW5cIiksXG4gICAgICAgIHdhdmVXaWR0aCA9IDEwLFxuICAgICAgICB3YXZlQ291bnQgPSBNYXRoLmZsb29yKHdpbmRvdy5pbm5lcldpZHRoL3dhdmVXaWR0aCksXG4gICAgICAgIGRvY0ZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHdhdmVDb3VudDsgaSsrKXtcbiAgICAgICAgICB2YXIgd2F2ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgd2F2ZS5jbGFzc05hbWUgKz0gXCIgd2F2ZS0wNzIzXCI7XG4gICAgICAgICAgZG9jRnJhZy5hcHBlbmRDaGlsZCh3YXZlKTtcbiAgICAgICAgICB3YXZlLnN0eWxlLmxlZnQgPSBpICogd2F2ZVdpZHRoICsgXCJweFwiO1xuICAgICAgICAgIHdhdmUuc3R5bGUud2Via2l0QW5pbWF0aW9uRGVsYXkgPSAoaS8xMDApICsgXCJzXCI7XG4gICAgICAgIH1cblxuICAgICAgICBvY2Vhbi5hcHBlbmRDaGlsZChkb2NGcmFnKTtcbiAgICAgIH1cblxuICAgICAgT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1Nob3dXYXZlKCk7XG4gICAgYDtcbiAgICBlZmZlY3RTY3JpcHQgPSBlZmZlY3QuY3JlYXRlRWwoXCJzY3JpcHRcIik7XG4gICAgZWZmZWN0U2NyaXB0LnRleHRDb250ZW50ID0gY29kZTtcbiAgfVxufVxuXG4vLyBSZW1vdmUgV2F2ZSBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gUmVtb3ZlX1dhdmVfTGlnaHQoZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KXtcbiAgbGV0IGVmZmVjdCA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWx0LXdhdmUtZWZmZWN0XCIpO1xuICBpZiAoZWZmZWN0KSB7XG4gICAgZWZmZWN0LnJlbW92ZSgpO1xuICB9XG5cbiAgVW5sb2FkX0VmZmVjdF9TY3JpcHQoKTtcbn1cblxuZnVuY3Rpb24gVW5sb2FkX0VmZmVjdF9TY3JpcHQoKXtcbiAgd2luZG93W1wiT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1Nob3dXYXZlXCJdID0gbnVsbDtcbn0iLCAiZXhwb3J0IGxldCBEYXJrVGhlbWVfRGlnaXRhbF9SYWluX0JhY2tncm91bmRfUHJvcGVydHkgPSBcInJhZGlhbC1ncmFkaWVudChlbGxpcHNlIGF0IGJvdHRvbSwgIzFiMjczNSAyMCUsICMwOTBhMGYgMTAwJSlcIjtcblxuLy8gQWRkIERpZ2l0YWwgUmFpbiBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gQWRkX0RpZ2l0YWxSYWluKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3RTY3JpcHQ6IEhUTUxTY3JpcHRFbGVtZW50O1xuXG4gIGlmIChkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lcikge1xuICAgIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJvZGItZHQtZGlnaXRhbC1yYWluLWR5bmFtaWMtZWZmZWN0XCIgfSk7XG5cbiAgICBlZmZlY3QuY3JlYXRlRWwoXCJjYW52YXNcIik7XG5cbiAgICBsZXQgY29kZSA9IGBcbiAgICAgIHZhciBvZGJfZGlnaXRhbF9yYWluX2NhbnZhc1xuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fY3R4O1xuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fZ3JkO1xuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fZGlnaXRhbHMgPSBcIjEwMDExMDEwMTAxMTAxMDEwMTAxMDEwMTAwMTAxMDEwMTAxMDEwMTExMDExMTEwMTAxMDEwMTAxMTAxMDEwMTAxMDEwMTAxMDExMTAwMTAxMDFcIjtcbiAgICAgIHZhciBvZGJfZGlnaXRhbF9yYWluX2ZvbnRfc2l6ZSA9IDE1O1xuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5fY29sdW1uczsgICAgLy9udW1iZXIgb2YgY29sdW1ucyBmb3IgdGhlIHJhaW5cbiAgICAgIHZhciBvZGJfZGlnaXRhbF9yYWluX2Ryb3BzID0gW107IC8vYW4gYXJyYXkgb2YgZHJvcHMgLSBvbmUgcGVyIGNvbHVtblxuICAgICAgdmFyIG9kYl9kaWdpdGFsX3JhaW5faW50ZXJ2YWw7XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9EcmF3KCl7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4LmZpbGxTdHlsZSA9IFwicmdiYSgwLCAwLCAwLCAwLjEpXCI7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4LmZpbGxSZWN0KDAsIDAsIG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLndpZHRoLCBvZGJfZGlnaXRhbF9yYWluX2NhbnZhcy5oZWlnaHQpO1xuXG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY3R4LmZpbGxTdHlsZSA9IFwiIzBGMFwiO1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eC5mb250ID0gb2RiX2RpZ2l0YWxfcmFpbl9mb250X3NpemUgKyBcInB4IGFyaWFsXCI7XG5cbiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG9kYl9kaWdpdGFsX3JhaW5fZHJvcHMubGVuZ3RoOyBpKyspXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBkaWdpdGFsID0gb2RiX2RpZ2l0YWxfcmFpbl9kaWdpdGFsc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkqb2RiX2RpZ2l0YWxfcmFpbl9kaWdpdGFscy5sZW5ndGgpXTtcblxuICAgICAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jdHguZmlsbFRleHQoZGlnaXRhbCwgaSpvZGJfZGlnaXRhbF9yYWluX2ZvbnRfc2l6ZSwgb2RiX2RpZ2l0YWxfcmFpbl9kcm9wc1tpXSpvZGJfZGlnaXRhbF9yYWluX2ZvbnRfc2l6ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmKG9kYl9kaWdpdGFsX3JhaW5fZHJvcHNbaV0qb2RiX2RpZ2l0YWxfcmFpbl9mb250X3NpemUgPiBvZGJfZGlnaXRhbF9yYWluX2NhbnZhcy5oZWlnaHQgJiYgTWF0aC5yYW5kb20oKSA+IDAuOTc1KVxuICAgICAgICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2Ryb3BzW2ldID0gMDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2Ryb3BzW2ldKys7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1N0YXJ0KCkge1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2NhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYub2RiLWR0LWRpZ2l0YWwtcmFpbi1keW5hbWljLWVmZmVjdCBjYW52YXNcIik7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLndpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcblxuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eCA9IG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jdHguZ2xvYmFsQWxwaGEgPSAxO1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInhvclwiO1xuXG4gICAgICAgIG9kYl9kaWdpdGFsX3JhaW5fY29sdW1ucyA9IG9kYl9kaWdpdGFsX3JhaW5fY2FudmFzLndpZHRoL29kYl9kaWdpdGFsX3JhaW5fZm9udF9zaXplO1xuXG4gICAgICAgIGZvcih2YXIgeCA9IDA7IHggPCBvZGJfZGlnaXRhbF9yYWluX2NvbHVtbnM7IHgrKylcbiAgICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2Ryb3BzW3hdID0gMTsgXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TZXRCcmlnaHRuZXNzKGJyaWdodG5lc3MpIHtcbiAgICAgICAgb2RiX2RpZ2l0YWxfcmFpbl9jYW52YXMud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsgIC8vIGNsZWFyIGNhbnZhc1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eC5nbG9iYWxDb21wb3NpdGVPcGVyYXRpb24gPSBcInhvclwiO1xuICAgICAgICBvZGJfZGlnaXRhbF9yYWluX2N0eC5nbG9iYWxBbHBoYSA9IGJyaWdodG5lc3M7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIE9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9DbGVhcigpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbChvZGJfZGlnaXRhbF9yYWluX2ludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX1N0YXJ0KCk7XG4gICAgICBvZGJfZGlnaXRhbF9yYWluX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0RyYXcsIDgwKTtcbiAgICBgXG4gICAgZWZmZWN0U2NyaXB0ID0gZWZmZWN0LmNyZWF0ZUVsKFwic2NyaXB0XCIpO1xuICAgIGVmZmVjdFNjcmlwdC50ZXh0Q29udGVudCA9IGNvZGU7XG4gIH1cbn1cblxuLy8gUmVtb3ZlIERpZ2l0YWwgUmFpbiBkeW5hbWljIGJhY2tncm91bmQgZWZmZWN0IGZvciBkYXJrIHRoZW1lXG5leHBvcnQgZnVuY3Rpb24gUmVtb3ZlX0RpZ2l0YWxSYWluKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1kaWdpdGFsLXJhaW4tZHluYW1pYy1lZmZlY3RcIik7XG4gIGlmIChlZmZlY3QpIHtcbiAgICBDYWxsQ2xlYXIoZHluYW1pY0JhY2tncm91bmRDb250YWluZXIpO1xuICAgIGVmZmVjdC5yZW1vdmUoKTtcbiAgfVxuXG4gIFVubG9hZF9FZmZlY3RfU2NyaXB0KCk7XG59XG5cbmZ1bmN0aW9uIFVubG9hZF9FZmZlY3RfU2NyaXB0KClcbnsgIFxuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfU3RhcnRcIl0gPSBudWxsO1xuICB3aW5kb3dbXCJPYnNpZGlhbl9EeW5hbWljX0JhY2tncm91bmRfRHJhd1wiXSA9IG51bGw7XG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9DbGVhclwiXSA9IG51bGw7XG4gIHdpbmRvd1tcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TZXRCcmlnaHRuZXNzXCJdID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gQ2FsbENsZWFyKGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCl7XG4gIGxldCBlZmZlY3RTY3JpcHQ6IEhUTUxTY3JpcHRFbGVtZW50O1xuXG4gIGxldCBlZmZlY3QgPSBkeW5hbWljQmFja2dyb3VuZENvbnRhaW5lci5maW5kKFwiZGl2Lm9kYi1kdC1kaWdpdGFsLXJhaW4tZHluYW1pYy1lZmZlY3RcIik7XG5cbiAgbGV0IGNvZGUgPSBgXG4gICAgT2JzaWRpYW5fRHluYW1pY19CYWNrZ3JvdW5kX0NsZWFyKCk7XG4gICAgYFxuXG4gIGVmZmVjdFNjcmlwdCA9IGVmZmVjdC5jcmVhdGVFbChcInNjcmlwdFwiKTtcbiAgZWZmZWN0U2NyaXB0LnRleHRDb250ZW50ID0gY29kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIFNldEJyaWdodG5lc3MoZHluYW1pY0JhY2tncm91bmRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50LCBicmlnaHRuZXNzOiBudW1iZXIpe1xuICBsZXQgc2V0QnJpZ2h0bmVzc1NjcmlwdDogSFRNTFNjcmlwdEVsZW1lbnQ7XG4gIGxldCBzZXRCcmlnaHRuZXNzU2NyaXB0Q29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcblxuICBsZXQgZWZmZWN0ID0gZHluYW1pY0JhY2tncm91bmRDb250YWluZXIuZmluZChcImRpdi5vZGItZHQtZGlnaXRhbC1yYWluLWR5bmFtaWMtZWZmZWN0XCIpO1xuICBpZiAoZWZmZWN0KXtcbiAgICBsZXQgc2V0QnJpZ2h0bmVzc1NjcmlwdENvbnRhaW5lciA9IGR5bmFtaWNCYWNrZ3JvdW5kQ29udGFpbmVyLmZpbmQoXCJkaXYub2RiLWR0LWRpZ2l0YWwtcmFpbi1keW5hbWljLWVmZmVjdCBkaXYuc2V0LWJyaWdodG5lc3Mtc2NyaXB0LWNvbnRhaW5lclwiKTtcblxuICAgIGlmIChzZXRCcmlnaHRuZXNzU2NyaXB0Q29udGFpbmVyKXtcbiAgICAgIHNldEJyaWdodG5lc3NTY3JpcHRDb250YWluZXIucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgc2V0QnJpZ2h0bmVzc1NjcmlwdENvbnRhaW5lciA9IGVmZmVjdC5jcmVhdGVFbChcImRpdlwiLCB7IGNsczogXCJkaXYuc2V0LWJyaWdodG5lc3Mtc2NyaXB0LWNvbnRhaW5lclwiIH0pO1xuXG4gICAgbGV0IGNvZGUgPSBcIk9ic2lkaWFuX0R5bmFtaWNfQmFja2dyb3VuZF9TZXRCcmlnaHRuZXNzKFwiICsgYnJpZ2h0bmVzcyArIFwiKVwiO1xuXG4gICAgc2V0QnJpZ2h0bmVzc1NjcmlwdCA9IHNldEJyaWdodG5lc3NTY3JpcHRDb250YWluZXIuY3JlYXRlRWwoXCJzY3JpcHRcIik7XG5cbiAgICBzZXRCcmlnaHRuZXNzU2NyaXB0LnRleHRDb250ZW50ID0gY29kZTtcbiAgfVxufSJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFnRzs7O0FDQ3pGLHFCQUFxQiw0QkFBMkM7QUFDckUsTUFBSSw0QkFBNEI7QUFDOUIsUUFBSSxTQUFTLDJCQUEyQixTQUFTLE9BQU8sRUFBRSxLQUFLLGlDQUFpQyxDQUFDO0FBRWpHLFdBQU8sU0FBUyxPQUFPLEVBQUUsS0FB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
